# Speekium å¼€å‘æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ 1: ä¸€é”®å¯åŠ¨ (æ¨è)

```bash
./dev.sh
```

**ç‰¹æ€§**:
- âœ… è‡ªåŠ¨å¯åŠ¨å‰ç«¯ Vite å¼€å‘æœåŠ¡å™¨ (http://localhost:5173)
- âœ… è‡ªåŠ¨å¯åŠ¨åç«¯å¹¶è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨
- âœ… å‰ç«¯çƒ­é‡è½½ (ä¿å­˜å³åˆ·æ–°)
- âœ… æµè§ˆå™¨å¼€å‘è€…å·¥å…· (å³é”® â†’ æ£€æŸ¥å…ƒç´  æˆ– Cmd+Option+I)
- âœ… Ctrl+C è‡ªåŠ¨æ¸…ç†æ‰€æœ‰è¿›ç¨‹

### æ–¹å¼ 2: æ‰‹åŠ¨å¯åŠ¨

**ç»ˆç«¯ 1 - å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨**:
```bash
cd web
npm run dev
```

**ç»ˆç«¯ 2 - å¯åŠ¨åç«¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰**:
```bash
python web_app.py --dev
```

### æ–¹å¼ 3: ç”Ÿäº§æ¨¡å¼

```bash
# 1. æ„å»ºå‰ç«¯
cd web
npm run build
cd ..

# 2. è¿è¡Œåº”ç”¨ï¼ˆä½¿ç”¨ç¼–è¯‘åçš„é™æ€æ–‡ä»¶ï¼‰
python web_app.py
```

## ğŸ“ å‘½ä»¤å‚æ•°

### `web_app.py` å‚æ•°

```bash
python web_app.py [é€‰é¡¹]

é€‰é¡¹:
  --dev           å¼€å‘æ¨¡å¼ï¼šè¿æ¥åˆ° Vite å¼€å‘æœåŠ¡å™¨
  --port PORT     æŒ‡å®š Vite æœåŠ¡å™¨ç«¯å£ (é»˜è®¤: 5173)
```

**ç¤ºä¾‹**:
```bash
# å¼€å‘æ¨¡å¼ï¼Œé»˜è®¤ç«¯å£ 5173
python web_app.py --dev

# å¼€å‘æ¨¡å¼ï¼Œè‡ªå®šä¹‰ç«¯å£ 5174
python web_app.py --dev --port 5174

# ç”Ÿäº§æ¨¡å¼ï¼ˆä½¿ç”¨ç¼–è¯‘åçš„é™æ€æ–‡ä»¶ï¼‰
python web_app.py
```

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### å‰ç«¯å¼€å‘

1. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**:
   ```bash
   ./dev.sh
   ```

2. **ä¿®æ”¹ä»£ç **:
   - ç¼–è¾‘ `web/src/` ä¸‹çš„æ–‡ä»¶
   - ä¿å­˜åè‡ªåŠ¨çƒ­é‡è½½ï¼Œæ— éœ€åˆ·æ–°

3. **è°ƒè¯•**:
   - å³é”®ç‚¹å‡» â†’ "æ£€æŸ¥å…ƒç´ " æ‰“å¼€å¼€å‘è€…å·¥å…·
   - æŸ¥çœ‹ Console æ—¥å¿—
   - ä½¿ç”¨ Network æ ‡ç­¾æŸ¥çœ‹ API è°ƒç”¨

### åç«¯å¼€å‘

1. **ä¿®æ”¹ Python ä»£ç **:
   - ç¼–è¾‘ `web_app.py` æˆ– `speekium.py`
   - **éœ€è¦é‡å¯åº”ç”¨** (Ctrl+C â†’ `./dev.sh`)

2. **æŸ¥çœ‹æ—¥å¿—**:
   - ç»ˆç«¯ä¼šæ˜¾ç¤ºæ‰€æœ‰ Python æ‰“å°è¾“å‡º
   - TTS ç”ŸæˆçŠ¶æ€ã€é”™è¯¯ä¿¡æ¯ç­‰

## ğŸ› ï¸ è„šæœ¬è¯´æ˜

### `dev.sh` - å¼€å‘æ¨¡å¼ (æ¨è)

**ç”¨é€”**: ä¸€é”®å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ

**åŠŸèƒ½**:
- æ¸…ç†æ—§è¿›ç¨‹
- æ£€æŸ¥ç«¯å£å ç”¨
- å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
- å¯åŠ¨åç«¯ï¼ˆ--dev æ¨¡å¼ï¼‰
- Ctrl+C è‡ªåŠ¨æ¸…ç†

**ä½¿ç”¨**:
```bash
./dev.sh
```

### `run.sh` - å…¼å®¹è„šæœ¬

**ç”¨é€”**: åŒ `dev.sh`ï¼Œä½†å‰ç«¯åœ¨å‰å°è¿è¡Œ

**åŒºåˆ«**:
- `dev.sh`: å‰åç«¯éƒ½åœ¨åå°ï¼Œç­‰å¾…ä»»ä¸€é€€å‡º
- `run.sh`: å‰ç«¯åœ¨åå°ï¼Œåç«¯åœ¨å‰å°

**ä½¿ç”¨**:
```bash
./run.sh
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: ä¿®æ”¹å‰ç«¯ä»£ç åæ²¡æœ‰æ›´æ–°ï¼Ÿ

**A**: ç¡®ä¿ä½¿ç”¨ `--dev` æ¨¡å¼:
```bash
./dev.sh
# æˆ–
python web_app.py --dev
```

### Q: æŠ¥é”™ "ç«¯å£ 5173 å·²è¢«å ç”¨"ï¼Ÿ

**A**: åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹:
```bash
# æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:5173

# æ€æ­»è¿›ç¨‹
kill -9 $(lsof -ti:5173)

# æˆ–ä½¿ç”¨æ¸…ç†è„šæœ¬
pkill -f "vite.*dev"
```

### Q: å¼€å‘è€…å·¥å…·æ‰“ä¸å¼€ï¼Ÿ

**A**: ç¡®ä¿ `web_app.py` å¯ç”¨äº† `debug=True`:
```python
webview.start(debug=True)
```

### Q: API è°ƒç”¨æŠ¥é”™ `r.getConfig is not a function`ï¼Ÿ

**A**: TypeScript ç±»å‹å®šä¹‰å’Œå®é™…è°ƒç”¨è¦ä½¿ç”¨ snake_case:
```typescript
// âœ… æ­£ç¡®
api.get_config()
api.save_config()
api.start_recording()

// âŒ é”™è¯¯
api.getConfig()
api.saveConfig()
api.startRecording()
```

## ğŸ“¦ æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# 1. æ„å»ºå‰ç«¯
cd web
npm run build

# 2. éªŒè¯æ„å»º
ls -lh ../dist/

# 3. è¿è¡Œç”Ÿäº§ç‰ˆæœ¬
cd ..
python web_app.py
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **å¼€å‘æ—¶å§‹ç»ˆä½¿ç”¨ `--dev` æ¨¡å¼**
2. **ä¿®æ”¹å‰ç«¯åè‡ªåŠ¨é‡è½½ï¼Œä¿®æ”¹åç«¯éœ€è¦é‡å¯**
3. **ä½¿ç”¨å¼€å‘è€…å·¥å…·è°ƒè¯•å‰ç«¯é—®é¢˜**
4. **ä½¿ç”¨ç»ˆç«¯è¾“å‡ºè°ƒè¯•åç«¯é—®é¢˜**
5. **æäº¤ä»£ç å‰å…ˆæ„å»ºå¹¶æµ‹è¯•ç”Ÿäº§ç‰ˆæœ¬**

---

## ğŸ†• æ–°åŠŸèƒ½è¯´æ˜ (v0.2.0)

### Python åç«¯æ–°å¢æ¨¡å—

#### 1. æ¨¡å¼ç®¡ç†å™¨ (`mode_manager.py`)
- **æŒ‰é”®å½•éŸ³æ¨¡å¼** (Push-to-Talk): æŒ‰ä½å¿«æ·é”®å½•éŸ³ï¼Œæ¾å¼€å‘é€
- **è‡ªç”±å¯¹è¯æ¨¡å¼** (Continuous): è‡ªåŠ¨VADæ£€æµ‹ï¼ŒæŒç»­ç›‘å¬
- æ¨¡å¼åˆ‡æ¢å’ŒçŠ¶æ€ç®¡ç†

#### 2. å¿«æ·é”®ç®¡ç†å™¨ (`hotkey_manager.py`)
- å…¨å±€å¿«æ·é”®: **Ctrl/Cmd + Alt + Space**
- è·¨å¹³å°æ”¯æŒ (macOS/Windows/Linux)
- æŒ‰ä¸‹/æ¾å¼€äº‹ä»¶å›è°ƒ

#### 3. æ‚¬æµ®çª—ç®¡ç†å™¨ (`floating_window.py`)
- ç‹¬ç«‹çš„å½•éŸ³çŠ¶æ€çª—å£
- å°ºå¯¸: 240x100px
- ä½ç½®: å±å¹•åº•éƒ¨å±…ä¸­ï¼Œè·åº•éƒ¨80px
- ç‰¹æ€§: æ— è¾¹æ¡†ã€ç½®é¡¶ã€ç»ç’ƒæ€æ•ˆæœ

#### 4. ç³»ç»Ÿæ‰˜ç›˜ (`tray_manager.py`)
- ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡å’Œèœå•
- å·¦é”®ç‚¹å‡»: æ˜¾ç¤ºä¸»çª—å£
- å³é”®èœå•: æ¨¡å¼åˆ‡æ¢ã€æ¸…ç©ºå†å²ã€è®¾ç½®ã€é€€å‡º
- ç›‘å¬çŠ¶æ€æŒ‡ç¤ºå™¨

#### 5. Web App é›†æˆæ›´æ–°
- æ–°å¢å‘½ä»¤è¡Œå‚æ•°: `--show` (å¯åŠ¨æ—¶æ˜¾ç¤ºä¸»çª—å£ï¼Œé»˜è®¤éšè—åˆ°æ‰˜ç›˜)
- é›†æˆæ‰€æœ‰ç®¡ç†å™¨
- çª—å£åè°ƒå’Œäº‹ä»¶å¤„ç†

### å‰ç«¯ç•Œé¢é‡æ„

#### 1. ä¸»é¢˜ç³»ç»Ÿ (`hooks/useTheme.ts`)
- æ·±è‰²æ¨¡å¼
- æµ…è‰²æ¨¡å¼
- è·Ÿéšç³»ç»Ÿä¸»é¢˜
- ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼ˆå³ä¸Šè§’ï¼‰

#### 2. å·¦ä¾§å¯¼èˆªæ  (`components/Sidebar.tsx`)
- ä¸»é¡µ
- è®¾ç½®
- å…³äº
- ç‰ˆæœ¬ä¿¡æ¯

#### 3. é¡¶éƒ¨çŠ¶æ€æ  (`components/StatusBar.tsx`)
- å½“å‰æ¨¡å¼æ˜¾ç¤º (æŒ‰é”®å½•éŸ³ / è‡ªç”±å¯¹è¯)
- å¯¹è¯ç»Ÿè®¡
- LLMåç«¯æ˜¾ç¤º
- ä¸»é¢˜åˆ‡æ¢æŒ‰é’®

#### 4. å¯¹è¯å†å²é‡æ„
- å±…ä¸­å¸ƒå±€ï¼Œæœ€å¤§å®½åº¦é™åˆ¶
- æ”¹è¿›çš„æ¬¢è¿ç•Œé¢
- å¿«æ·é”®æç¤º

#### 5. æ‚¬æµ®çª— UI (`web/floating.html`)
- ç»ç’ƒæ€åŠé€æ˜èƒŒæ™¯
- å®æ—¶éŸ³é¢‘æ³¢å½¢åŠ¨ç”»
- çŠ¶æ€æ–‡å­—æ˜¾ç¤º
- è‡ªé€‚åº”ä¸»é¢˜

### å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Cmd + Alt` (macOS) | æŒ‰é”®å½•éŸ³ (æŒ‰ä½è¯´è¯ï¼Œæ¾å¼€å‘é€) |
| `Ctrl + Alt` (Win/Linux) | æŒ‰é”®å½•éŸ³ (æŒ‰ä½è¯´è¯ï¼Œæ¾å¼€å‘é€) |
| å·¦é”®ç‚¹å‡»æ‰˜ç›˜ | æ˜¾ç¤º/éšè—ä¸»çª—å£ |
| å³é”®ç‚¹å‡»æ‰˜ç›˜ | æ‰“å¼€èœå• |

### æ–°å¢ä¾èµ–

```bash
# Python
pynput>=1.7.6        # å…¨å±€å¿«æ·é”®
pystray>=0.19.5      # ç³»ç»Ÿæ‰˜ç›˜
Pillow>=10.2.0       # å›¾æ ‡ç”Ÿæˆ

# å®‰è£…
uv sync
# æˆ–
pip install -e .
```

### æµ‹è¯•æ–°åŠŸèƒ½

**1. æµ‹è¯•å¿«æ·é”®**
```bash
python web_app.py --dev --show
# æŒ‰ä½ Ctrl+Alt+Spaceï¼Œè§‚å¯Ÿæ‚¬æµ®çª—
```

**2. æµ‹è¯•æ‰˜ç›˜**
```bash
python web_app.py --dev
# åº”ç”¨å¯åŠ¨åéšè—åˆ°æ‰˜ç›˜
# ç‚¹å‡»æ‰˜ç›˜å›¾æ ‡æ˜¾ç¤ºçª—å£
```

**3. æµ‹è¯•ä¸»é¢˜åˆ‡æ¢**
```bash
python web_app.py --dev --show
# ç‚¹å‡»å³ä¸Šè§’ä¸»é¢˜æŒ‰é’®
# åˆ‡æ¢: æµ…è‰² â†’ æ·±è‰² â†’ è·Ÿéšç³»ç»Ÿ
```

### é¡¹ç›®ç»“æ„æ›´æ–°

```
speekium/
â”œâ”€â”€ mode_manager.py          # [æ–°å¢] æ¨¡å¼ç®¡ç†
â”œâ”€â”€ hotkey_manager.py        # [æ–°å¢] å¿«æ·é”®ç®¡ç†
â”œâ”€â”€ floating_window.py       # [æ–°å¢] æ‚¬æµ®çª—ç®¡ç†
â”œâ”€â”€ tray_manager.py          # [æ–°å¢] ç³»ç»Ÿæ‰˜ç›˜
â”œâ”€â”€ web_app.py               # [æ›´æ–°] é›†æˆæ‰€æœ‰åŠŸèƒ½
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ plans/
â”‚       â””â”€â”€ 2026-01-07-ui-redesign.md  # [æ–°å¢] è®¾è®¡æ–‡æ¡£
â””â”€â”€ web/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx         # [æ–°å¢] å·¦ä¾§å¯¼èˆª
    â”‚   â”‚   â”œâ”€â”€ StatusBar.tsx       # [æ–°å¢] é¡¶éƒ¨çŠ¶æ€æ 
    â”‚   â”‚   â”œâ”€â”€ ChatHistory.tsx     # [é‡æ„]
    â”‚   â”‚   â””â”€â”€ ...
    â”‚   â”œâ”€â”€ hooks/
    â”‚   â”‚   â””â”€â”€ useTheme.ts         # [æ–°å¢] ä¸»é¢˜hook
    â”‚   â”œâ”€â”€ App.tsx                 # [é‡æ„] æ–°å¸ƒå±€
    â”‚   â””â”€â”€ index.css               # [æ›´æ–°] ä¸»é¢˜å˜é‡
    â””â”€â”€ floating.html               # [æ–°å¢] æ‚¬æµ®çª—UI
```
